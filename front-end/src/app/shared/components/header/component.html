<main class="container" *ngIf="products">
  <section class="top">
    <div class="items">
      <div class="brand center">
        <img src="assets/img/logo.svg" alt="logo" style="width: 26px; height: 26px" /> ER TRADE
      </div>
      <div class="search center">
        <div class="input-container">
          <input
            type="text"
            class="input"
            placeholder="Aradığınız ürün adını yazınız..."
            matInput
            [matAutocomplete]="auto"
            (keyup)="onKeyup()"
            [(ngModel)]="searchKey"
          />
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option
              *ngFor="let prod of filteredProducts"
              [(value)]="prod.name"
              (onSelectionChange)="onSelectionChange(prod)"
            >
              <div class="search-result">
                <div class="search-prod">{{prod.name}}</div>
                <div class="search-brand">{{prod.brand}}</div>
              </div>
            </mat-option>
          </mat-autocomplete>
          <mat-icon>search</mat-icon>
        </div>
      </div>
      <div class="tools center">
        <button mat-button routerLink="cart" class="cart" *ngIf="(this.authService.isAuth | async)">
          <mat-icon> shopping_cart</mat-icon>
          Sepetim
          <div class="custom-badge" *ngIf="(this.cartService.cart | async).length>0">
            {{(this.cartService.cart | async).length}}
          </div>
        </button>
        <button mat-button routerLink="login" *ngIf="(this.authService.isAuth | async) === false">
          <mat-icon>login</mat-icon> Giriş Yap
        </button>
        <button
          mat-button
          routerLink="register"
          *ngIf="(this.authService.isAuth | async) === false"
        >
          <mat-icon>person_add_alt_1</mat-icon> Üye Ol
        </button>
        <button mat-button [matMenuTriggerFor]="menu" *ngIf="(this.authService.isAuth | async)">
          <mat-icon>account_circle</mat-icon>
          Hesabım
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item routerLink="orders">
            <mat-icon>pending_actions</mat-icon> Siparişlerim
          </button>
          <button mat-menu-item (click)="logout()"><mat-icon>logout</mat-icon> Çıkış</button>
        </mat-menu>
      </div>
    </div>
  </section>
  <section class="navbar mat-elevation-z1">
    <div class="navbar-container">
      <button mat-button routerLink="main" class="nav">ANA SAYFA</button>
      <button
        mat-button
        class="nav"
        routerLink="mn-orders"
        *ngIf="(this.authService.role | async) === roles.admin && (this.authService.isAuth | async)"
      >
        SİPARİŞLER
      </button>
      <button
        mat-button
        class="nav"
        routerLink="mn-products"
        *ngIf="(this.authService.role | async) === roles.admin && (this.authService.isAuth | async)"
      >
        ÜRÜNLER
      </button>
      <button
        mat-button
        class="nav"
        routerLink="mn-new-product"
        *ngIf="(this.authService.role | async) === roles.admin && (this.authService.isAuth | async)"
      >
        ÜRÜN EKLE
      </button>
      <button
        mat-button
        class="nav"
        *ngFor="let category of categories"
        (click)="navigateToFilteredPage(category.name)"
      >
        {{category.name | uppercase}}
      </button>
      <button mat-button routerLink="main" class="nav">İLETİŞİM</button>
    </div>
  </section>
</main>
